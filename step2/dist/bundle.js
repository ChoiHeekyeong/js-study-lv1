(()=>{"use strict";class t extends class{$target;$state;constructor(t){this.$target=t,this.init(),this.render()}init(){}template(){}render(){this.$target.innerHTML=this.template(),this.setBtnHandler()}setState(t){this.$state={...t},this.render()}setBtnHandler(){}}{constructor(t){super(t)}init(){this.$state={items:[],selectedItem:-1}}itemTemplate({id:t,content:e,highlight:i,isComplete:s}){return`\n            <li>\n                ${this.$state.selectedItem===t?`\n                    <form name="modifierForm" action="" id="${t}">\n                        <fieldset>\n                            <legend hidden>아이템 수정</legend>\n                            <label>\n                                <span hidden>아이템 수정</span>\n                                <input type="text" value="${e}" size="40">\n                            </label>\n                                <button type="submit">완료</button>\n                                <button type="button" class="cancel">취소</button>\n                        </fieldset>\n                    </form>   \n            `:`\n                    <p ${i?'style="color:#09F"':""} ${s?'class="finish"':""}>\n                        <input type="checkbox" id="${t}" ${i?" checked":""}>\n                        ${e}\n                    </p>\n                    <button type="button" class="complete" id="${t}">완료</button>\n                    <button type="button" class="modify" id="${t}">수정</button>\n                    <button type="button" class="delete" id="${t}">삭제</button>\n                `}\n            </li>\n        `}template(){return`\n            <h1>📃 TodoList</h1>\n                <form name="appenderForm" action="" method="post">\n                  <fieldset>\n                    <legend hidden>TodoList Form</legend>\n                    <label>\n                      <span hidden>아이템 추가</span>\n                      <input type="text" size="40" placeholder="Todo Item 내용을 입력해주세요">\n                    </label>\n                    <button type="submit">전송</button>\n                  </fieldset>\n                </form>\n            <ul>\n                ${this.$state.items.map(this.itemTemplate.bind(this)).join("")}\n            </ul>\n          `}addItem(t){t.preventDefault();const e=t.target.querySelector("input");if(0===e.value.trim().length)return e.value="",e.focus(),alert("아이템 이름을 입력해주세요!");const i={id:this.$state.items.length+1,content:e.value,highlight:!1,isComplete:!1,createdAt:Date.now()};this.setState({items:[...this.$state.items,i],selectedItem:this.$state.selectedItem})}deleteItem(t){const e=t.target,i=this.$state.items.filter((function(t){return t.id!==Number(e.id)}));this.setState({items:i,selectedItem:this.$state.selectedItem})}modifyItem(t){const e=t.target;this.$state.selectedItem=Number(e.id),this.render();const i=document.querySelector('form[name="modifierForm"]');i.addEventListener("submit",this.updateItem.bind(this)),i.querySelector(".cancel").addEventListener("click",this.cancelModifyItem.bind(this)),i.onkeydown=function(t){27==t.keyCode&&this.cancelModifyItem.call(this)}.bind(this)}updateItem(t){t.preventDefault();const e=t.target.querySelector("input"),i=e.value.trim();if(0===i.length)return e.value="",alert("아이템 이름을 입력해주세요!");const s=Number(t.target.id),n=this.$state.items.map((t=>t.id)).indexOf(s);this.$state.items[n].content=i,this.$state.selectedItem=-1,this.setState({items:[...this.$state.items],selectedItem:this.$state.selectedItem})}cancelModifyItem(){this.$state.selectedItem=-1,this.render()}completeItem(t){const e=t.target,i=this.$state.items.map((t=>t.id)).indexOf(Number(e.id));this.$state.items[i].isComplete=!this.$state.items[i].isComplete,this.setState({items:[...this.$state.items],selectedItem:this.$state.selectedItem})}toggleItem(t){const e=t.target,i=this.$state.items.map((t=>t.id)).indexOf(Number(e.id));this.$state.items[i].highlight=!this.$state.items[i].highlight,this.setState({items:[...this.$state.items],selectedItem:this.$state.selectedItem})}setBtnHandler(){const t=document.querySelector('form[name="appenderForm"]'),e=document.querySelectorAll(".delete"),i=document.querySelectorAll(".modify"),s=document.querySelectorAll(".complete"),n=document.querySelectorAll('input[type="checkbox"]');t.addEventListener("submit",this.addItem.bind(this)),e.forEach(function(t){t.addEventListener("click",this.deleteItem.bind(this))}.bind(this)),i.forEach(function(t){t.addEventListener("click",this.modifyItem.bind(this))}.bind(this)),s.forEach(function(t){t.addEventListener("click",this.completeItem.bind(this))}.bind(this)),n.forEach(function(t){t.addEventListener("change",this.toggleItem.bind(this))}.bind(this))}}new class{constructor(){const e=document.querySelector("#app");new t(e)}}})();